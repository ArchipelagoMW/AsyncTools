Starcraft 2:
  harder_mode: # Trigger only
    false: 40 # Regular easier worlds. No difficult option combinations
    true: 60 # Enable only for filler-only asyncs. Can contain worlds for those already experienced with APSC2
  game_format: # Trigger only
    multi_campaign: 40
    all_vanilla_terran: 5
    all_vanilla_protoss: 5
    all_terran: 5
    all_zerg: 5
    all_protoss: 5
    wol: 10
    hots: 10
    lotv: 10
    big_async_canvas: 5
  mission_order:
    # See also trigger handling race swaps
    vanilla: 5
    vanilla_shuffled: 20
    grid: 25
    mini_campaign: 10
    gauntlet: 10
    golden_path: 15
    hopscotch: 15
  game_difficulty:
    casual: 25
    normal: 35
    hard: 20
    brutal: 0
  difficulty_damage_modifier: random
  all_in_map: random
  maximum_campaign_size: 195
  two_start_positions: random
  shuffle_no_build:
    true: 75
    false: 25
  starter_unit:
    balanced: 50
    any_starter_unit: 50
  required_tactics: standard
  ensure_generic_items: 25
  min_number_of_upgrades: 2
  max_number_of_upgrades: -1
  generic_upgrade_research:
    auto_in_no_build: 75
    always_auto: 25
  max_upgrade_level: random-range-3-5
  generic_upgrade_research_speedup: random
  generic_upgrade_items: random
  generic_upgrade_missions:
    0: 50
    random-range-10-25: 50
  vanilla_items_only: false
  exclude_overpowered_items: false
  war_council_nerfs: random
  enabled_campaigns: []
  enable_race_swap: disabled
  selected_races:
    - Zerg
    - Terran
    - Protoss
  grant_story_tech:
    no_grant: 75
    grant: 25
  grant_story_levels: minimum
  kerrigan_presence: not_present
  kerrigan_levels_per_mission_completed: 0
  kerrigan_levels_per_mission_completed_cap: -1
  kerrigan_level_item_sum: random-range-70-140
  kerrigan_level_item_distribution:
    size_7: 15
    size_10: 30
    size_14: 40
    size_35: 15
  take_over_ai_allies: false
  vanilla_locations: enabled
  extra_locations: enabled
  challenge_locations: enabled
  # Hard locations
  mastery_locations: disabled
  speedrun_locations: disabled
  exclude_very_hard_missions:
    default: 50
    true: 50
  excluded_missions: []
  spear_of_adun_presence: vanilla
  spear_of_adun_present_in_no_build: false
  spear_of_adun_passive_ability_presence: vanilla
  spear_of_adun_passive_present_in_no_build: false
  spear_of_adun_max_active_abilities: 13
  spear_of_adun_max_passive_abilities: 3
  nova_max_weapons: 5
  kerrigan_max_active_abilities: 12
  kerrigan_max_passive_abilities: 5
  key_mode: 
    disabled: 10
    progressive_questlines: 15
    progressive_missions: 50
    progressive_per_questline: 25
  nova_ghost_of_a_chance_variant: wol
  mercenary_highlanders: random
  difficulty_curve: uneven
  mission_race_balancing: random
  victory_cache: 0
  mission_order_scouting: completed
  enable_void_trade: true
  void_trade_age_limit: 1_week
  void_trade_workers: random
  enable_morphling:
    false: 25
    true: 75
  filler_percentage: 0
  minerals_per_item: 10
  vespene_per_item: 10
  starting_supply_per_item: 2
  maximum_supply_per_item: 2
  maximum_supply_reduction_per_item: 1
  lowest_maximum_supply: 180
  research_cost_reduction_per_item: 5
  custom_mission_order:
    # Must be declared as is overridden by a trigger. Set to default for safety.
    # Always overridden by a trigger if this option is actually meaningful
    Default Campaign:
      Default Layout:
        size: 9
        type: grid
      display_name: 'null'
      entry_rules: [ ]
      global:
        display_name: 'null'
        entry_rules: [ ]
        exit: false
        goal: false
        max_difficulty: relative
        min_difficulty: relative
        mission_pool:
          - all missions
        missions: [ ]
        unique_name: false
        unique_progression_track: 0
      goal: true
      max_difficulty: relative
      min_difficulty: relative
      unique_name: false
      unique_progression_track: 0
  single_race_with_race_swaps: false # Trigger handling only
  excluded_mission_class: unimportant # Trigger handling only
  triggers:
    # Link grant_story_levels to grant_story_tech
    - option_category: Starcraft 2
      option_name: grant_story_tech
      option_result: no_grant
      options:
        Starcraft 2:
          grant_story_levels: disabled
    - option_category: Starcraft 2
      option_name: grant_story_tech
      option_result: grant
      options:
        Starcraft 2:
          grant_story_levels:
            additive: 50
            minimum: 50
    # Game formats
    # Canvas-style are handled later
    - option_category: Starcraft 2
      option_name: game_format
      option_result: multi_campaign
      options:
        Starcraft 2:
          enabled_campaigns: !!set
            ? 'Wings of Liberty'
            ? 'Prophecy'
            ? 'Heart of the Swarm'
            ? 'Whispers of Oblivion (Legacy of the Void: Prologue)'
            ? 'Legacy of the Void'
            ? 'Into the Void (Legacy of the Void: Epilogue)'
            ? 'Nova Covert Ops'
          mission_order:
            vanilla: 5
            vanilla_shuffled_no_both_disable_very_hards_and_no_builds: 20
            grid: 25
            mini_campaign: 10
            gauntlet: 10
            golden_path: 15
            hopscotch: 15
          maximum_campaign_size:
            195: 15
            83: 50
            40: 35
          spear_of_adun_presence:
            vanilla: 30
            protoss: 50
            any_race_lotv: 10
            everywhere: 10
          spear_of_adun_present_in_no_build: 
            false: 90
            true: 10
          spear_of_adun_passive_ability_presence:
            vanilla: 30
            protoss: 50
            any_race_lotv: 10
            everywhere: 10
          spear_of_adun_passive_present_in_no_build:
            false: 80
            true: 20
          take_over_ai_allies:
            false: 90
            true: 10
          kerrigan_presence: vanilla
          enable_race_swap: random
          nova_ghost_of_a_chance_variant: auto
    - option_category: Starcraft 2
      option_name: game_format
      option_result: all_vanilla_terran
      options:
        Starcraft 2:
          enabled_campaigns: !!set
            ? 'Wings of Liberty'
            ? 'Nova Covert Ops'
          maximum_campaign_size:
            34: 85
            17: 15
          nova_ghost_of_a_chance_variant: auto
    - option_category: Starcraft 2
      option_name: game_format
      option_result: all_vanilla_protoss
      options:
        Starcraft 2:
          enabled_campaigns: !!set
            ? 'Prophecy'
            ? 'Whispers of Oblivion (Legacy of the Void: Prologue)'
            ? 'Legacy of the Void'
          spear_of_adun_presence: protoss
          spear_of_adun_passive_ability_presence: protoss
          spear_of_adun_present_in_no_build: random
          spear_of_adun_passive_present_in_no_build: random
          maximum_campaign_size:
            26: 85
            16: 15
    - option_category: Starcraft 2
      option_name: game_format
      option_result: wol
      options:
        Starcraft 2:
          enabled_campaigns: !!set
            ? 'Wings of Liberty'
          maximum_campaign_size:
            25: 85
            16: 15
    - option_category: Starcraft 2
      option_name: game_format
      option_result: hots
      options:
        Starcraft 2:
          enabled_campaigns: !!set
            ? 'Heart of the Swarm'
          maximum_campaign_size:
            20: 85
            12: 15
          shuffle_no_build: true
          kerrigan_presence: vanilla
    - option_category: Starcraft 2
      option_name: game_format
      option_result: lotv
      options:
        Starcraft 2:
          enabled_campaigns: !!set
            ? 'Legacy of the Void'
          maximum_campaign_size:
            19: 85
            12: 15
          two_start_positions: false # Possibly not enough starters
          shuffle_no_build: true
          spear_of_adun_present_in_no_build: random
          spear_of_adun_passive_present_in_no_build: random
    - option_category: Starcraft 2
      option_name: game_format
      option_result: all_terran
      options:
        Starcraft 2:
          enabled_campaigns: !!set
            ? 'Wings of Liberty'
            ? 'Prophecy'
            ? 'Heart of the Swarm'
            ? 'Whispers of Oblivion (Legacy of the Void: Prologue)'
            ? 'Legacy of the Void'
            ? 'Into the Void (Legacy of the Void: Epilogue)'
            ? 'Nova Covert Ops'
          maximum_campaign_size:
            83: 85
            40: 15
          spear_of_adun_presence: not_present
          spear_of_adun_passive_ability_presence: not_present
          kerrigan_presence: vanilla
          shuffle_no_build: true
          enable_race_swap: shuffle_all
          exclude_very_hard_missions: false
          selected_races:
            - Terran
          single_race_with_race_swaps: true
          nova_ghost_of_a_chance_variant: auto
    - option_category: Starcraft 2
      option_name: game_format
      option_result: all_zerg
      options:
        Starcraft 2:
          enabled_campaigns: !!set
            ? 'Wings of Liberty'
            ? 'Prophecy'
            ? 'Heart of the Swarm'
            ? 'Whispers of Oblivion (Legacy of the Void: Prologue)'
            ? 'Legacy of the Void'
            ? 'Into the Void (Legacy of the Void: Epilogue)'
          maximum_campaign_size:
            83: 85
            40: 15
          spear_of_adun_presence: not_present
          spear_of_adun_passive_ability_presence: not_present
          kerrigan_presence: vanilla
          shuffle_no_build: true
          enable_race_swap: shuffle_all
          exclude_very_hard_missions: false
          selected_races:
            - Zerg
          single_race_with_race_swaps: true
    - option_category: Starcraft 2
      option_name: game_format
      option_result: all_protoss
      options:
        Starcraft 2:
          enabled_campaigns: !!set
            ? 'Wings of Liberty'
            ? 'Prophecy'
            ? 'Heart of the Swarm'
            ? 'Whispers of Oblivion (Legacy of the Void: Prologue)'
            ? 'Legacy of the Void'
            ? 'Into the Void (Legacy of the Void: Epilogue)'
          maximum_campaign_size:
            83: 85
            40: 15
          spear_of_adun_presence: 
            vanilla: 50
            protoss: 50
          spear_of_adun_present_in_no_build: 
            false: 90
            true: 10
          spear_of_adun_passive_ability_presence:
            vanilla: 50
            protoss: 50
          spear_of_adun_passive_present_in_no_build:
            false: 80
            true: 20
          kerrigan_presence: not_present
          shuffle_no_build: true
          enable_race_swap: shuffle_all
          exclude_very_hard_missions: false
          selected_races:
            - Protoss
          single_race_with_race_swaps: true
    # Set Mission order away from Vanilla if race swaps are enabled so no off race missions will get rolled
    - option_category: Starcraft 2
      option_name: enable_race_swap
      option_result: pick_one
      options:
        Starcraft 2:
          mission_order:
            vanilla_shuffled_no_both_disable_very_hards_and_no_builds: 25
            grid: 25
            mini_campaign: 10
            gauntlet: 10
            golden_path: 15
            hopscotch: 15
    - option_category: Starcraft 2
      option_name: enable_race_swap
      option_result: pick_one_non_vanilla
      options:
        Starcraft 2:
          mission_order:
            vanilla_shuffled_no_both_disable_very_hards_and_no_builds: 25
            grid: 25
            mini_campaign: 10
            gauntlet: 10
            golden_path: 15
            hopscotch: 15
    - option_category: Starcraft 2
      option_name: enable_race_swap
      option_result: shuffle_all
      options:
        Starcraft 2:
          mission_order:
            vanilla_shuffled: 25
            grid: 25
            mini_campaign: 10
            gauntlet: 10
            golden_path: 15
            hopscotch: 15
    - option_category: Starcraft 2
      option_name: enable_race_swap
      option_result: shuffle_all_non_vanilla
      options:
        Starcraft 2:
          mission_order:
            vanilla_shuffled: 25
            grid: 25
            mini_campaign: 10
            gauntlet: 10
            golden_path: 15
            hopscotch: 15
    # Single-race with race swaps: Disable Epilogue if the mission order is Vanilla Shuffled
    - option_category: Starcraft 2
      option_name: single_race_with_race_swaps
      option_result: true
      options:
        Starcraft 2:
          mission_order:
            vanilla_shuffled_no_epilogue: 25
            grid: 25
            mini_campaign: 10
            gauntlet: 10
            golden_path: 15
            hopscotch: 15
    # Single-race with race swaps: Disable Epilogue if the mission order is Vanilla Shuffled
    - option_category: Starcraft 2
      option_name: mission_order
      option_result: vanilla_shuffled_no_epilogue
      options:
        Starcraft 2:
          mission_order: vanilla_shuffled
          -enabled_campaigns: !!set # This trigger somehow doesn't work with YAML lists. Needs to be defined as a YAML set
            ? 'Into the Void (Legacy of the Void: Epilogue)'
    # Fix a case when nobuilds and very hards can't be disabled both in order to have enough missions to generate
    - option_category: Starcraft 2
      option_name: mission_order
      option_result: vanilla_shuffled_no_both_disable_very_hards_and_no_builds
      options:
        Starcraft 2:
          mission_order: vanilla_shuffled
          excluded_mission_class:
            very_hard: 25
            no_build: 25
            none: 50
    - option_category: Starcraft 2
      option_name: excluded_mission_class
      option_result: very_hard
      options:
        Starcraft 2:
          shuffle_no_build: true
          exclude_very_hard_missions: true
    - option_category: Starcraft 2
      option_name: excluded_mission_class
      option_result: no_build
      options:
        Starcraft 2:
          shuffle_no_build: false
          exclude_very_hard_missions: false
    - option_category: Starcraft 2
      option_name: excluded_mission_class
      option_result: none
      options:
        Starcraft 2:
          shuffle_no_build: true
          exclude_very_hard_missions: false
    # Setup Canvas-type mission orders now.
    # Do this after all the mission order corrections have been made
    # as this picks a mission order along with other options
    - option_category: Starcraft 2
      option_name: game_format
      option_result: big_async_canvas
      options:
        Starcraft 2:
          mission_order: custom
          custom_mission_order:
            The Big Async:
              type: canvas
              canvas:
              
                - ' bbb  aa  ccc   ' # 01
                - ' z  z tt p      ' # 02
                - ' z  z tt p      ' # 03
                - ' zzz  tt p pp   ' # 04
                - ' z  z tt p   p  ' # 05
                - ' z  z tt p   p  ' # 06
                - ' zzz  tt  ppp   ' # 07
                - '                ' # 08
                - ' t  p t tz  z pp' # 09
                - ' t p pt tz  zp  ' # 10
                - 't tp  t tzz zp  ' # 11
                - 't t p  t zzzzp  ' # 12
                - 'ttt  p t z zzp  ' # 13
                - 't tp p t z  zp  ' # 14
                - 'T T P  T Z  Z PP' # 15
                
                # 105 missions total
                # Terran: I + A + Y = 37 missions
                # Zerg: B + N = 35 missions
                # Protoss: G + S + C = 33 missions
                
              jump_distance_orthogonal: 2
              jump_distance_diagonal: 1
              missions:
                - index:
                    - group(a) # Terran starters
                  mission_pool:
                    - Terran Missions
                  entrance: true
                - index:
                    - group(b) # Zerg starters
                  mission_pool:
                    - Zerg Missions
                  entrance: true
                - index:
                    - group(c) # Protoss starters
                  mission_pool:
                    - Protoss Missions
                  entrance: true
                - index:
                    - group(t)
                  mission_pool:
                    - Terran Missions
                  entry_rules:
                  - items: 
                        Progressive Key: 2
                - index:
                    - group(z)
                  mission_pool:
                    - Zerg Missions
                  entry_rules:
                  - items: 
                        Progressive Key: 1
                - index:
                    - group(p)
                  mission_pool:
                    - Protoss Missions
                  entry_rules:
                  - items: 
                        Progressive Key: 3
                - index:
                    - group(T)
                  mission_pool:
                    - Terran Missions
                  entry_rules:
                  - items: 
                        Progressive Key: 2
                  difficulty: very_hard
                  exit: true
                  goal: true
                - index:
                    - group(Z)
                  mission_pool:
                    - Zerg Missions
                  entry_rules:
                  - items: 
                        Progressive Key: 1
                  difficulty: very_hard
                  exit: true
                  goal: true
                - index:
                    - group(P)
                  mission_pool:
                    - Protoss Missions
                  entry_rules:
                  - items: 
                        Progressive Key: 3
                  difficulty: very_hard
                  exit: true
                  goal: true
          # Behave the same as multi-campaign now, except force race swaps in
          enabled_campaigns: !!set
            ? 'Wings of Liberty'
            ? 'Prophecy'
            ? 'Heart of the Swarm'
            ? 'Whispers of Oblivion (Legacy of the Void: Prologue)'
            ? 'Legacy of the Void'
            ? 'Into the Void (Legacy of the Void: Epilogue)'
            ? 'Nova Covert Ops'
          spear_of_adun_presence:
            vanilla: 30
            protoss: 50
            any_race_lotv: 10
            everywhere: 10
          spear_of_adun_present_in_no_build: 
            false: 90
            true: 10
          spear_of_adun_passive_ability_presence:
            vanilla: 30
            protoss: 50
            any_race_lotv: 10
            everywhere: 10
          spear_of_adun_passive_present_in_no_build:
            false: 80
            true: 20
          take_over_ai_allies:
            false: 90
            true: 10
          kerrigan_presence: vanilla
          enable_race_swap: shuffle_all # Requires race swaps to be enabled
          nova_ghost_of_a_chance_variant: auto
          minerals_per_item: 5 # long mission order, reduce effect of fillers
          vespene_per_item: 5
          starting_supply_per_item: 1
          maximum_supply_per_item: 1
          research_cost_reduction_per_item: 2
          
    # Short mission layout detection
    # Consider those always as long ones
    - option_category: Starcraft 2
      option_name: mission_order
      option_result: vanilla
      options:
        Starcraft 2:
          maximum_campaign_size: 83
    - option_category: Starcraft 2
      option_name: mission_order
      option_result: vanilla_shuffled
      options:
        Starcraft 2:
          maximum_campaign_size: 83
    # Exclude missions requiring Kerrigan level in short orders
    # Also allow victory cache there
    # Mini campaign
    - option_category: Starcraft 2
      option_name: mission_order
      option_result: mini_campaign
      options:
        Starcraft 2:
          excluded_missions:
            - Supreme
            - The Infinite Cycle
          maximum_campaign_size: 40
          victory_cache: random-range-0-3
    # Short dynamic layouts
    - option_category: Starcraft 2
      option_name: maximum_campaign_size
      option_result: 12
      options:
        Starcraft 2:
          excluded_missions:
            - Supreme
            - The Infinite Cycle
          victory_cache: random-range-0-3
    - option_category: Starcraft 2
      option_name: maximum_campaign_size
      option_result: 16
      options:
        Starcraft 2:
          excluded_missions:
            - Supreme
            - The Infinite Cycle
          victory_cache: random-range-0-3
    - option_category: Starcraft 2
      option_name: maximum_campaign_size
      option_result: 17
      options:
        Starcraft 2:
          excluded_missions:
            - Supreme
            - The Infinite Cycle
          victory_cache: random-range-0-3
    - option_category: Starcraft 2
      option_name: maximum_campaign_size
      option_result: 40
      options:
        Starcraft 2:
          excluded_missions:
            - Supreme
            - The Infinite Cycle
          victory_cache: random-range-0-3
    # Harder mode (for filler-only asyncs)
    # Shouldn't be too challenging as truly challenging YAMLs are heavily customized
    - option_category: Starcraft 2
      option_name: harder_mode
      option_result: true
      options:
        Starcraft 2:
          game_difficulty:
            casual: 0
            normal: 25
            hard: 35
            brutal: 40
          required_tactics:
            standard: 50
            advanced: 40
            any_units: 10
          starter_unit:
            off: 50
            balanced: 25
            any_starter_unit: 25
          max_number_of_upgrades: random-range-3-8
          spear_of_adun_present_in_no_build: false
          spear_of_adun_passive_present_in_no_build: false
          spear_of_adun_max_active_abilities: random-range-3-8
          spear_of_adun_max_passive_abilities: random-range-1-3
          nova_max_weapons: random-range-2-5
          kerrigan_presence:
            vanilla: 50
            not_present: 50
          kerrigan_max_active_abilities: random-range-3-8
          kerrigan_max_passive_abilities: random-range-2-5
          war_council_nerfs: true
          exclude_overpowered_items: 
            true: 75
            false: 25
          mastery_locations: enabled
          speedrun_locations: enabled
          difficulty_curve: standard
          filler_percentage: 20

    # Harder mode - long games - reduce effect of fillers
    - option_category: Starcraft 2
      option_name: maximum_campaign_size
      option_result: 195
      options:
        Starcraft 2:
          minerals_per_item: 5
          vespene_per_item: 5
          starting_supply_per_item: 1
          maximum_supply_per_item: 1
          research_cost_reduction_per_item: 2
    - option_category: Starcraft 2
      option_name: maximum_campaign_size
      option_result: 83
      options:
        Starcraft 2:          
          minerals_per_item: 5
          vespene_per_item: 5
          starting_supply_per_item: 1
          maximum_supply_per_item: 1
          research_cost_reduction_per_item: 2
    # Slot name
    - option_category: null
      option_name: name
      option_result: Player{player}
      options:
        null:
          name: SC2-{player}
 